{% extends "base.html" %}
{% block content %}
<h2>Generador - Congruencia Lineal</h2>
<div class="row">
  <!-- Formulario -->
  <div class="col-md-6">
    <form method="POST">
      <div class="mb-3">
        <label>X₀ (Semilla):</label>
        <input type="number" name="xo" id="xo" class="form-control" required value="{{ xo }}">
      </div>
      <div class="mb-3">
        <label>k:</label>
        <input type="number" name="k" id="k" class="form-control" required value="{{ k }}">
      </div>
      <div class="mb-3">
        <label>c:</label>
        <input type="number" name="c" id="c" class="form-control" required value="{{ c }}">
      </div>
      <div class="mb-3">
        <label>g:</label>
        <input type="number" name="g" id="g" class="form-control" required value="{{ g }}">
      </div>
      <div class="mb-3">
        <label>Iteraciones:</label>
        <input type="number" name="iteraciones" class="form-control" required value="{{ n }}">
      </div>
      <!-- <div class="mb-3">
        <label>Valor mínimo Ni:</label>
        <input type="number" step="0.01" name="min" class="form-control" required value="{{ min_val }}">
      </div>
      <div class="mb-3">
        <label>Valor máximo Ni:</label>
        <input type="number" step="0.01" name="max" class="form-control" required value="{{ max_val }}">
      </div> -->

      <button type="submit" class="btn btn-primary">Generar</button>
      <button formaction="/export_lineal_csv" formmethod="POST" class="btn btn-success">Exportar CSV</button>
      <button formaction="/grafico_lineal" formmethod="POST" class="btn btn-info">Ver Gráfico</button>
    </form>
  </div>

  <!-- Vista previa parámetros -->
  <div class="col-md-6">
    <div class="card p-3 shadow-sm">
      <h5 class="card-title">Parámetros actuales</h5>
      <p><strong>X₀:</strong> <span id="preview_xo">{{ xo }}</span></p>
      <p><strong>k:</strong> <span id="preview_k">{{ k }}</span></p>
      <p><strong>c:</strong> <span id="preview_c">{{ c }}</span></p>
      <p><strong>g:</strong> <span id="preview_g">{{ g }}</span></p>
    </div>
  </div>
</div>

{% if table %}
<hr>
<h3>Resultados</h3>
{{ table|safe }}
{% endif %}

<script>
  // Actualizar en tiempo real los parámetros ingresados
  document.querySelectorAll("#xo, #k, #c, #g").forEach(input => {
    input.addEventListener("input", () => {
      document.getElementById("preview_xo").textContent = document.getElementById("xo").value;
      document.getElementById("preview_k").textContent = document.getElementById("k").value;
      document.getElementById("preview_c").textContent = document.getElementById("c").value;
      document.getElementById("preview_g").textContent = document.getElementById("g").value;
    });
  });
</script>
{% endblock %}
